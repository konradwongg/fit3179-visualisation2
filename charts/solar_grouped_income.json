{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "data": {"url": "./data/solar_top_postcodes.csv"},
  "title": "Average Solar Adoption by Income Band",
  "transform": [
    {
      "aggregate": [{"op": "mean", "field": "InstallationsPer1000", "as": "avg_install"}],
      "groupby": ["IncomeBand"]
    }
  ],
  "mark": {"type": "arc", "outerRadius": 120, "tooltip": true},
  "encoding": {
    "theta": {
      "field": "avg_install",
      "type": "quantitative",
      "title": "Average per 1,000"
    },
    "color": {
      "field": "IncomeBand",
      "type": "nominal",
      "title": "Income Band",
      "legend": {"orient": "right"}
    },
    "tooltip": [
      {"field": "IncomeBand", "type": "nominal", "title": "Income Band"},
      {"field": "avg_install", "type": "quantitative", "title": "Average per 1,000", "format": ".1f"}
    ]
  },
  "view": {"stroke": null},
  "config": {
    "arc": {"stroke": "#f6eeb4", "strokeWidth": 1},
    "legend": {"labelFontSize": 11, "titleFontSize": 12}
  }
}
